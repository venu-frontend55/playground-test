<header><h2>Patients Data</h2></header>

<div class="container">
    <form class="form-floating">
    <div class="row">
        <div class="col-md-4 col-sm-12">
            <label>First / Last Name </label>
            <input type="text" class="form-control" name="fname" [(ngModel)]="fname">
        </div>
        <div class="col-md-4 col-sm-12">
            <label>Date of Birth</label>
            <input type="date" class="form-control" name="dob" [(ngModel)]="dob">
        </div>
        <div class="col-md-4 col-sm-12">
            <button type="button" class="btn btn-primary" (click)="search()" [disabled]="!(fname || dob) || disableBtn"> Search </button></div>

    </div>
</form>
<div class="d-flex justify-content-center">
    <div class="spinner-border text-primary" role="status" style="width: 7rem; height: 7rem;" *ngIf="!dataLoaded">
</div>
</div>

<table class="table table-striped" *ngIf="dataLoaded">
    <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Family Name</th>
      <th scope="col">Given Name</th>
      <th scope="col">DOB</th>
      <th scope="col">Phone</th>
      <th scope="col">Gender</th>
      <th scope="col">Maritial Status</th>
    </tr>
    </thead>
    <tbody>
        <tr *ngIf="dataLoaded && patients.length ==0">
            <td colspan="8">No Patients Available</td>
        </tr>
    <tr *ngFor="let patient of patients; index as i">
        <td>{{patient.id}}</td>
        <td>{{patient.family}}</td>
        <td>{{patient.given}}</td>
        <td>{{patient.dob}}</td>
        <td>{{patient.phone}}</td>
        <td>{{patient.gender}}</td>
        <td>{{patient.maritalStatus}}</td>
    </tr>
    </tbody>
  </table>
</div>
<footer *ngIf="patients.length">
    <div>API Called at :: {{apiCalledTime | date:"HH:mm"}}</div>
    <div>Time taken to execute the api :: {{apiExecTime}} ms.</div>
</footer>
